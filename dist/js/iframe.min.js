"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var IFrame=function(){function a(e,t){_classCallCheck(this,a),this.name=e,this.system=t,this.createTag=createTag,this.frame=this.createTag("iframe","iframe"),this.chat=null,this.isOwnMessage=!1}return _createClass(a,[{key:"clearChat",value:function(){for(;170<+this.chat.offsetHeight;)this.chat.removeChild(this.chat.children[0])}},{key:"listenMessages",value:function(){var a=this;this.system.subscribe("receivedMessage",function(e){var t=a.createTag("p","iframe__text");t.append(e.message),"system"===e.type?t.classList.add("iframe__text--system"):a.isOwnMessage&&(t.classList.add("iframe__text--own"),a.isOwnMessage=!1),a.chat.appendChild(t),a.clearChat()})}},{key:"activateDragable",value:function(e){var a=this;e.ondragstart=function(){return!1},e.onmousedown=function(t){t.target.classList.contains("iframe__input")||t.target.classList.contains("iframe__send")||t.target.classList.contains("iframe__close")||(a.frame.style.left=a.frame.offsetLeft+"px",a.frame.style.top=a.frame.offsetTop+"px",a.frame.classList.add("iframe--drag"),a.frame.style.zIndex=999,a.frame.contentWindow.onmousemove=function(e){a.frame.style.left=parseInt(a.frame.style.left,10)+e.pageX-t.pageX+"px",a.frame.style.top=parseInt(a.frame.style.top,10)+e.pageY-t.pageY+"px"},a.frame.contentWindow.onmouseup=function(){a.frame.contentWindow.onmousemove=null,a.frame.contentWindow.onmouseup=null,a.frame.style.zIndex=100})}}},{key:"renderIframe",value:function(){var f=this;this.frame.setAttribute("name","".concat(this.name)),this.frame.setAttribute("scrolling","no");var l=this.createTag("link");return l.setAttribute("href","./css/app.min.css"),l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),this.frame.onload=function(){var e=f.frame.contentWindow.document;e.head.appendChild(l);var t=f.createTag("div","iframe__chat"),a=f.createTag("div","iframe__close"),n=f.createTag("h3","iframe__text","iframe__text--heading"),s=f.createTag("div","iframe__content");f.chat=s;var i=f.createTag("div","iframe__input-wrap"),r=f.createTag("label","iframe__label"),c=f.createTag("input","iframe__input");c.setAttribute("type","text");var o=f.createTag("button","iframe__send");o.setAttribute("type","button"),o.append("send"),n.append("Chat: "),e.body.appendChild(t).appendChild(n),t.appendChild(s),t.appendChild(a),e.body.appendChild(i).appendChild(r),r.append("[".concat(f.name,"]: ")),r.appendChild(c),i.appendChild(o),o.addEventListener("click",function(){f.frame.contentWindow.parent.postMessage("[".concat(f.name,"] - ").concat(c.value),"*"),f.isOwnMessage=!0}),a.addEventListener("click",function(){f.frame.contentWindow.parent.postMessage({remove:f.name},"*")}),f.activateDragable(e.body)},this.system&&this.listenMessages(),this.frame}}]),a}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2lmcmFtZS5qcyJdLCJuYW1lcyI6WyJJRnJhbWUiLCJuYW1lIiwic3lzdGVtIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNyZWF0ZVRhZyIsImZyYW1lIiwiY2hhdCIsImlzT3duTWVzc2FnZSIsIm9mZnNldEhlaWdodCIsInJlbW92ZUNoaWxkIiwiY2hpbGRyZW4iLCJfdGhpcyIsInN1YnNjcmliZSIsImRhdGEiLCJtZXNzYWdlIiwiYXBwZW5kIiwidHlwZSIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiY2xlYXJDaGF0IiwiZWxlbWVudCIsIl90aGlzMiIsIm9uZHJhZ3N0YXJ0Iiwib25tb3VzZWRvd24iLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwic3R5bGUiLCJsZWZ0Iiwib2Zmc2V0TGVmdCIsInRvcCIsIm9mZnNldFRvcCIsInpJbmRleCIsImNvbnRlbnRXaW5kb3ciLCJvbm1vdXNlbW92ZSIsImUiLCJwYXJzZUludCIsInBhZ2VYIiwicGFnZVkiLCJvbm1vdXNldXAiLCJfdGhpczMiLCJzZXRBdHRyaWJ1dGUiLCJjb25jYXQiLCJjc3NMaW5rIiwib25sb2FkIiwiaWZyYW1lRG9jIiwiZG9jdW1lbnQiLCJoZWFkIiwiY2xvc2UiLCJoZWFkaW5nIiwibWVzc2FnZXMiLCJpbnB1dFdyYXAiLCJsYWJlbCIsImlucHV0Iiwic2VuZCIsImJvZHkiLCJhZGRFdmVudExpc3RlbmVyIiwicGFyZW50IiwicG9zdE1lc3NhZ2UiLCJ2YWx1ZSIsInJlbW92ZSIsImFjdGl2YXRlRHJhZ2FibGUiLCJsaXN0ZW5NZXNzYWdlcyJdLCJtYXBwaW5ncyI6InVaQUFNQSxrQkFDSixTQUFBQSxFQUFZQyxFQUFNQyxHQUFRQyxnQkFBQUMsS0FBQUosR0FDeEJJLEtBQUtILEtBQU9BLEVBQ1pHLEtBQUtGLE9BQVNBLEVBQ2RFLEtBQUtDLFVBQVlBLFVBQ2pCRCxLQUFLRSxNQUFRRixLQUFLQyxVQUFVLFNBQVUsVUFDdENELEtBQUtHLEtBQU8s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akJILEVBQVVVLEtBQUtyQyxZQUFZaUMsR0FBV2pDLFlBQVlrQyxHQUNsREEsRUFBTXRDLE9BQU4sSUFBQTRCLE9BQWlCRixFQUFLekMsS0FBdEIsUUFDQXFELEVBQU1sQyxZQUFZbUMsR0FDbEJGLEVBQVVqQyxZQUFZb0MsR0FDdEJBLEVBQUtFLGlCQUFpQixRQUFTLFdBQzdCaEIsRUFBS3BDLE1BQU02QixjQUFjd0IsT0FBT0MsWUFBaEMsSUFBQWhCLE9BQWdERixFQUFLekMsS0FBckQsUUFBQTJDLE9BQWdFVyxFQUFNTSxPQUFTLEtBQy9FbkIsRUFBS2xDLGNBQWUsSUFFdEIwQyxFQUFNUSxpQkFBaUIsUUFBUyxXQUM5QmhCLEVBQUtwQyxNQUFNNkIsY0FBY3dCLE9BQU9DLFlBQVksQ0FBQ0UsT0FBUXBCLEVBQUt6QyxNQUFPLE9BRW5FeUMsRUFBS3FCLGlCQUFpQmhCLEVBQVVVLE9BRTlCckQsS0FBS0YsUUFDUEUsS0FBSzRELGlCQUVBNUQsS0FBS0UiLCJmaWxlIjoianMvaWZyYW1lLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIElGcmFtZSB7XHJcbiAgY29uc3RydWN0b3IobmFtZSwgc3lzdGVtKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5zeXN0ZW0gPSBzeXN0ZW07XHJcbiAgICB0aGlzLmNyZWF0ZVRhZyA9IGNyZWF0ZVRhZztcclxuICAgIHRoaXMuZnJhbWUgPSB0aGlzLmNyZWF0ZVRhZygnaWZyYW1lJywgJ2lmcmFtZScpO1xyXG4gICAgdGhpcy5jaGF0ID0gbnVsbDtcclxuICAgIHRoaXMuaXNPd25NZXNzYWdlID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjbGVhckNoYXQoKSB7XHJcbiAgICB3aGlsZSAoK3RoaXMuY2hhdC5vZmZzZXRIZWlnaHQgPiAxNzApIHtcclxuICAgICAgdGhpcy5jaGF0LnJlbW92ZUNoaWxkKHRoaXMuY2hhdC5jaGlsZHJlblswXSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsaXN0ZW5NZXNzYWdlcygpIHtcclxuICAgIHRoaXMuc3lzdGVtLnN1YnNjcmliZSgncmVjZWl2ZWRNZXNzYWdlJywgKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuY3JlYXRlVGFnKCdwJywgJ2lmcmFtZV9fdGV4dCcpO1xyXG4gICAgICBtZXNzYWdlLmFwcGVuZChkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnc3lzdGVtJykge1xyXG4gICAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnaWZyYW1lX190ZXh0LS1zeXN0ZW0nKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzT3duTWVzc2FnZSkge1xyXG4gICAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnaWZyYW1lX190ZXh0LS1vd24nKTtcclxuICAgICAgICB0aGlzLmlzT3duTWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY2hhdC5hcHBlbmRDaGlsZChtZXNzYWdlKTtcclxuICAgICAgdGhpcy5jbGVhckNoYXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVEcmFnYWJsZShlbGVtZW50KSB7XHJcbiAgICBlbGVtZW50Lm9uZHJhZ3N0YXJ0ID0gKCkgPT4ge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgZWxlbWVudC5vbm1vdXNlZG93biA9IChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaWZyYW1lX19pbnB1dCcpIHx8XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaWZyYW1lX19zZW5kJykgfHxcclxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpZnJhbWVfX2Nsb3NlJykpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5mcmFtZS5zdHlsZS5sZWZ0ID0gdGhpcy5mcmFtZS5vZmZzZXRMZWZ0ICsgJ3B4JztcclxuICAgICAgdGhpcy5mcmFtZS5zdHlsZS50b3AgPSB0aGlzLmZyYW1lLm9mZnNldFRvcCArICdweCc7XHJcbiAgICAgIHRoaXMuZnJhbWUuY2xhc3NMaXN0LmFkZCgnaWZyYW1lLS1kcmFnJyk7XHJcbiAgICAgIHRoaXMuZnJhbWUuc3R5bGUuekluZGV4ID0gOTk5O1xyXG4gICAgICB0aGlzLmZyYW1lLmNvbnRlbnRXaW5kb3cub25tb3VzZW1vdmUgPSAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuZnJhbWUuc3R5bGUubGVmdCA9IHBhcnNlSW50KHRoaXMuZnJhbWUuc3R5bGUubGVmdCwgMTApICsgZS5wYWdlWCAtIGV2ZW50LnBhZ2VYICsgJ3B4JztcclxuICAgICAgICB0aGlzLmZyYW1lLnN0eWxlLnRvcCA9IHBhcnNlSW50KHRoaXMuZnJhbWUuc3R5bGUudG9wLCAxMCkgKyBlLnBhZ2VZIC0gZXZlbnQucGFnZVkgKyAncHgnO1xyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLmZyYW1lLmNvbnRlbnRXaW5kb3cub25tb3VzZXVwID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZnJhbWUuY29udGVudFdpbmRvdy5vbm1vdXNlbW92ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5mcmFtZS5jb250ZW50V2luZG93Lm9ubW91c2V1cCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5mcmFtZS5zdHlsZS56SW5kZXggPSAxMDA7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySWZyYW1lKCkge1xyXG4gICAgdGhpcy5mcmFtZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBgJHt0aGlzLm5hbWV9YCk7XHJcbiAgICB0aGlzLmZyYW1lLnNldEF0dHJpYnV0ZSgnc2Nyb2xsaW5nJywgJ25vJyk7XHJcbiAgICBjb25zdCBjc3NMaW5rID0gdGhpcy5jcmVhdGVUYWcoJ2xpbmsnKTtcclxuICAgIGNzc0xpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgJy4vY3NzL2FwcC5taW4uY3NzJyk7XHJcbiAgICBjc3NMaW5rLnNldEF0dHJpYnV0ZSgncmVsJywgJ3N0eWxlc2hlZXQnKTtcclxuICAgIGNzc0xpbmsuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7XHJcbiAgICB0aGlzLmZyYW1lLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgY29uc3QgaWZyYW1lRG9jID0gdGhpcy5mcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O1xyXG4gICAgICBpZnJhbWVEb2MuaGVhZC5hcHBlbmRDaGlsZChjc3NMaW5rKTtcclxuICAgICAgY29uc3QgY2hhdCA9IHRoaXMuY3JlYXRlVGFnKCdkaXYnLCAnaWZyYW1lX19jaGF0Jyk7XHJcbiAgICAgIGNvbnN0IGNsb3NlID0gdGhpcy5jcmVhdGVUYWcoJ2RpdicsICdpZnJhbWVfX2Nsb3NlJyk7XHJcbiAgICAgIGNvbnN0IGhlYWRpbmcgPSB0aGlzLmNyZWF0ZVRhZygnaDMnLCAnaWZyYW1lX190ZXh0JywgJ2lmcmFtZV9fdGV4dC0taGVhZGluZycpO1xyXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHRoaXMuY3JlYXRlVGFnKCdkaXYnLCAnaWZyYW1lX19jb250ZW50Jyk7XHJcbiAgICAgIHRoaXMuY2hhdCA9IG1lc3NhZ2VzO1xyXG4gICAgICBjb25zdCBpbnB1dFdyYXAgPSB0aGlzLmNyZWF0ZVRhZygnZGl2JywgJ2lmcmFtZV9faW5wdXQtd3JhcCcpO1xyXG4gICAgICBjb25zdCBsYWJlbCA9IHRoaXMuY3JlYXRlVGFnKCdsYWJlbCcsICdpZnJhbWVfX2xhYmVsJyk7XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5jcmVhdGVUYWcoJ2lucHV0JywgJ2lmcmFtZV9faW5wdXQnKTtcclxuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcclxuICAgICAgY29uc3Qgc2VuZCA9IHRoaXMuY3JlYXRlVGFnKCdidXR0b24nLCAnaWZyYW1lX19zZW5kJyk7XHJcbiAgICAgIHNlbmQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xyXG4gICAgICBzZW5kLmFwcGVuZCgnc2VuZCcpO1xyXG4gICAgICBoZWFkaW5nLmFwcGVuZCgnQ2hhdDogJyk7XHJcbiAgICAgIGlmcmFtZURvYy5ib2R5LmFwcGVuZENoaWxkKGNoYXQpLmFwcGVuZENoaWxkKGhlYWRpbmcpO1xyXG4gICAgICBjaGF0LmFwcGVuZENoaWxkKG1lc3NhZ2VzKTtcclxuICAgICAgY2hhdC5hcHBlbmRDaGlsZChjbG9zZSk7XHJcbiAgICAgIGlmcmFtZURvYy5ib2R5LmFwcGVuZENoaWxkKGlucHV0V3JhcCkuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gICAgICBsYWJlbC5hcHBlbmQoYFske3RoaXMubmFtZX1dOiBgKTtcclxuICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICBpbnB1dFdyYXAuYXBwZW5kQ2hpbGQoc2VuZCk7XHJcbiAgICAgIHNlbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5mcmFtZS5jb250ZW50V2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShgWyR7dGhpcy5uYW1lfV0gLSAke2lucHV0LnZhbHVlfWAsICcqJyk7XHJcbiAgICAgICAgdGhpcy5pc093bk1lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5mcmFtZS5jb250ZW50V2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7cmVtb3ZlOiB0aGlzLm5hbWV9LCAnKicpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5hY3RpdmF0ZURyYWdhYmxlKGlmcmFtZURvYy5ib2R5KTtcclxuICAgIH07XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0pIHtcclxuICAgICAgdGhpcy5saXN0ZW5NZXNzYWdlcygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZnJhbWU7XHJcbiAgfVxyXG59XHJcbiJdfQ==

"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var IFrame=function(){function a(e,t){_classCallCheck(this,a),this.name=e,this.system=t,this.createTag=createTag,this.frame=this.createTag("iframe","iframe"),this.chat=null}return _createClass(a,[{key:"renderIframe",value:function(){var h=this;this.frame.setAttribute("name","".concat(this.name)),this.frame.setAttribute("scrolling","no");var o=this.createTag("link");return o.setAttribute("href","./css/app.min.css"),o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),this.frame.onload=function(){var e=h.frame.contentWindow.document;e.head.appendChild(o);var t=h.createTag("div","iframe__chat"),a=h.createTag("h3","iframe__text","iframe__text--heading"),n=h.createTag("div","iframe__content");h.chat=n;var i=h.createTag("div","iframe__input-wrap"),r=h.createTag("label","iframe__label"),s=h.createTag("input","iframe__input");s.setAttribute("type","text");var c=h.createTag("button","iframe__send");c.setAttribute("type","button"),c.append("send"),a.append("Chat: "),e.body.appendChild(t).appendChild(a),t.appendChild(n),e.body.appendChild(i).appendChild(r),r.append("[".concat(h.name,"]: ")),r.appendChild(s),i.appendChild(c),c.addEventListener("click",function(){h.frame.contentWindow.parent.postMessage("[".concat(h.name,"] - ").concat(s.value))})},this.system&&this.listenMessages(),this.frame}},{key:"clearChat",value:function(){for(;170<+this.chat.offsetHeight;)console.log(this.chat.children)}},{key:"listenMessages",value:function(){var a=this;this.system.subscribe("receivedMessage",function(e){var t=a.createTag("p","iframe__text");t.append(e),a.chat.appendChild(t),a.clearChat()}),this.system.subscribe("addNewIframe",function(e){var t=a.createTag("p","iframe__text","iframe__text--system");t.append("[system]: ".concat(e," joined the conversation")),t.fontWeight="bold",a.chat.appendChild(t),a.clearChat()})}}]),a}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2lmcmFtZS5qcyJdLCJuYW1lcyI6WyJJRnJhbWUiLCJuYW1lIiwic3lzdGVtIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNyZWF0ZVRhZyIsImZyYW1lIiwiY2hhdCIsIl90aGlzIiwic2V0QXR0cmlidXRlIiwiY29uY2F0IiwiY3NzTGluayIsIm9ubG9hZCIsImlmcmFtZURvYyIsImNvbnRlbnRXaW5kb3ciLCJkb2N1bWVudCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImhlYWRpbmciLCJtZXNzYWdlcyIsImlucHV0V3JhcCIsImxhYmVsIiwiaW5wdXQiLCJzZW5kIiwiYXBwZW5kIiwiYm9keSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsInZhbHVlIiwibGlzdGVuTWVzc2FnZXMiLCJvZmZzZXRIZWlnaHQiLCJjb25zb2xlIiwibG9nIiwiY2hpbGRyZW4iLCJfdGhpczIiLCJzdWJzY3JpYmUiLCJkYXRhIiwibWVzc2FnZSIsImNsZWFyQ2hhdCIsImZvbnRXZWlnaHQiXSwibWFwcGluZ3MiOiJ1WkFBTUEsa0JBQ0osU0FBQUEsRUFBWUMsRUFBTUMsR0FBUUMsZ0JBQUFDLEtBQUFKLEdBQ3hCSSxLQUFLSCxLQUFPQSxFQUNaRyxLQUFLRixPQUFTQSxFQUNkRSxLQUFLQyxVQUFZQSxVQUNqQkQsS0FBS0UsTUFBUUYsS0FBS0MsVUFBVSxTQUFVLFVBQ3RDRCxLQUFLRyxLQUFPLGlFQUdDLElBQUFDLEVBQUFKLEtBQ2JBLEtBQUtFLE1BQU1HLGFBQWEsT0FBeEIsR0FBQUMsT0FBbUNOLEtBQUtILE9BQ3hDRyxLQUFLRSxNQUFNRyxhQUFhLFlBQWEsTUFDckMsSUFBTUUsRUFBVVAsS0FBS0MsVUFBVSxRQW9DL0IsT0FuQ0FNLEVBQVFGLGFBQWEsT0FBUSxxQkFDN0JFLEVBQVFGLGFBQWEsTUFBTyxjQUM1QkUsRUFBUUYsYUFBYSxPQUFRLFlBQzdCTCxLQUFLRSxNQUFNTSxPQUFTLFdBQ2xCLElBQU1DLEVBQVlMLEVBQUtGLE1BQU1RLGNBQWNDLFNBQzNDRixFQUFVRyxLQUFLQyxZQUFZTixHQUMzQixJQUFNSixFQUFPQyxFQUFLSCxVQUFVLE1BQU8sZ0JBQzdCYSxFQUFVVixFQUFLSCxVQUFVLEtBQU0sZUFBZ0IseUJBQy9DYyxFQUFXWCxFQUFLSCxVQUFVLE1BQU8sbUJBQ3ZDRyxFQUFLRCxLQUFPWSxFQUdaLElBQU1DLEVBQVlaLEVBQUtILFVBQVUsTUFBTyxzQkFDbENnQixFQUFRYixFQUFLSCxVQUFVLFFBQVMsaUJBQ2hDaUIsRUFBUWQsRUFBS0gsVUFBVSxRQUFTLGlCQUN0Q2lCLEVBQU1iLGFBQWEsT0FBUSxRQUMzQixJQUFNYyxFQUFPZixFQUFLSCxVQUFVLFNBQVUsZ0JBQ3RDa0IsRUFBS2QsYUFBYSxPQUFRLFVBQzFCYyxFQUFLQyxPQUFPLFFBQ1pOLEVBQVFNLE9BQU8sVUFHZlgsRUFBVVksS0FBS1IsWUFBWVYsR0FBTVUsWUFBWUMsR0FDN0NYLEVBQUtVLFlBQVlFLEdBQ2pCTixFQUFVWSxLQUFLUixZQUFZRyxHQUFXSCxZQUFZSSxHQUNsREEsRUFBTUcsT0FBTixJQUFBZCxPQUFpQkYsRUFBS1AsS0FBdEIsUUFDQW9CLEVBQU1KLFlBQVlLLEdBQ2xCRixFQUFVSCxZQUFZTSxHQUN0QkEsRUFBS0csaUJBQWlCLFFBQVMsV0FDN0JsQixFQUFLRixNQUFNUSxjQUFjYSxPQUFPQyxZQUFoQyxJQUFBbEIsT0FBZ0RGLEVBQUtQLEtBQXJELFFBQUFTLE9BQWdFWSxFQUFNTyxXQUd0RXpCLEtBQUtGLFFBQ1BFLEtBQUswQixpQkFFQTFCLEtBQUtFLDBDQUlaLEtBQWlDLEtBQXpCRixLQUFLRyxLQUFLd0IsY0FDaEJDLFFBQVFDLElBQUk3QixLQUFLRyxLQUFLMkIsbURBSVQsSUFBQUMsRUFBQS9CLEtBQ2ZBLEtBQUtGLE9BQU9rQyxVQUFVLGtCQUFtQixTQUFDQyxHQUN4QyxJQUFNQyxFQUFVSCxFQUFLOUIsVUFBVSxJQUFLLGdCQUNwQ2lDLEVBQVFkLE9BQU9hLEdBQ2ZGLEVBQUs1QixLQUFLVSxZQUFZcUIsR0FDdEJILEVBQUtJLGNBRVBuQyxLQUFLRixPQUFPa0MsVUFBVSxlQUFnQixTQUFDQyxHQUNyQyxJQUFNQyxFQUFVSCxFQUFLOUIsVUFBVSxJQUFLLGVBQWdCLHdCQUNwRGlDLEVBQVFkLE9BQVIsYUFBQWQsT0FBNEIyQixFQUE1Qiw2QkFDQUMsRUFBUUUsV0FBYSxPQUNyQkwsRUFBSzVCLEtBQUtVLFlBQVlxQixHQUN0QkgsRUFBS0kiLCJmaWxlIjoianMvaWZyYW1lLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIElGcmFtZSB7XHJcbiAgY29uc3RydWN0b3IobmFtZSwgc3lzdGVtKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5zeXN0ZW0gPSBzeXN0ZW07XHJcbiAgICB0aGlzLmNyZWF0ZVRhZyA9IGNyZWF0ZVRhZztcclxuICAgIHRoaXMuZnJhbWUgPSB0aGlzLmNyZWF0ZVRhZygnaWZyYW1lJywgJ2lmcmFtZScpO1xyXG4gICAgdGhpcy5jaGF0ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIHJlbmRlcklmcmFtZSgpIHtcclxuICAgIHRoaXMuZnJhbWUuc2V0QXR0cmlidXRlKCduYW1lJywgYCR7dGhpcy5uYW1lfWApO1xyXG4gICAgdGhpcy5mcmFtZS5zZXRBdHRyaWJ1dGUoJ3Njcm9sbGluZycsICdubycpO1xyXG4gICAgY29uc3QgY3NzTGluayA9IHRoaXMuY3JlYXRlVGFnKCdsaW5rJyk7XHJcbiAgICBjc3NMaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICcuL2Nzcy9hcHAubWluLmNzcycpO1xyXG4gICAgY3NzTGluay5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdzdHlsZXNoZWV0Jyk7XHJcbiAgICBjc3NMaW5rLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpO1xyXG4gICAgdGhpcy5mcmFtZS5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlmcmFtZURvYyA9IHRoaXMuZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcclxuICAgICAgaWZyYW1lRG9jLmhlYWQuYXBwZW5kQ2hpbGQoY3NzTGluayk7XHJcbiAgICAgIGNvbnN0IGNoYXQgPSB0aGlzLmNyZWF0ZVRhZygnZGl2JywgJ2lmcmFtZV9fY2hhdCcpO1xyXG4gICAgICBjb25zdCBoZWFkaW5nID0gdGhpcy5jcmVhdGVUYWcoJ2gzJywgJ2lmcmFtZV9fdGV4dCcsICdpZnJhbWVfX3RleHQtLWhlYWRpbmcnKTtcclxuICAgICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLmNyZWF0ZVRhZygnZGl2JywgJ2lmcmFtZV9fY29udGVudCcpO1xyXG4gICAgICB0aGlzLmNoYXQgPSBtZXNzYWdlcztcclxuICAgICAgLypjb25zdCB0ZXh0MSA9IHRoaXMuY3JlYXRlVGFnKCdwJywgJ2lmcmFtZV9fdGV4dCcpO1xyXG4gICAgICBjb25zdCB0ZXh0MiA9IHRoaXMuY3JlYXRlVGFnKCdwJywgJ2lmcmFtZV9fdGV4dCcpOyovXHJcbiAgICAgIGNvbnN0IGlucHV0V3JhcCA9IHRoaXMuY3JlYXRlVGFnKCdkaXYnLCAnaWZyYW1lX19pbnB1dC13cmFwJyk7XHJcbiAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5jcmVhdGVUYWcoJ2xhYmVsJywgJ2lmcmFtZV9fbGFiZWwnKTtcclxuICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLmNyZWF0ZVRhZygnaW5wdXQnLCAnaWZyYW1lX19pbnB1dCcpO1xyXG4gICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xyXG4gICAgICBjb25zdCBzZW5kID0gdGhpcy5jcmVhdGVUYWcoJ2J1dHRvbicsICdpZnJhbWVfX3NlbmQnKTtcclxuICAgICAgc2VuZC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XHJcbiAgICAgIHNlbmQuYXBwZW5kKCdzZW5kJyk7XHJcbiAgICAgIGhlYWRpbmcuYXBwZW5kKCdDaGF0OiAnKTtcclxuICAgICAgLyp0ZXh0MS5hcHBlbmQoJ1tzeXN0ZW1dIC0gaWZyYW1lMSBqb2luZWQgdGhlIGNvbnZlcnNhdGlvbicpO1xyXG4gICAgICB0ZXh0Mi5hcHBlbmQoJ1tpRnJhbWUyXSAtIHdobyB3YW50cyB0byBjb21lIHBsYXkgc29jY2VyPycpOyovXHJcbiAgICAgIGlmcmFtZURvYy5ib2R5LmFwcGVuZENoaWxkKGNoYXQpLmFwcGVuZENoaWxkKGhlYWRpbmcpO1xyXG4gICAgICBjaGF0LmFwcGVuZENoaWxkKG1lc3NhZ2VzKTtcclxuICAgICAgaWZyYW1lRG9jLmJvZHkuYXBwZW5kQ2hpbGQoaW5wdXRXcmFwKS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICAgIGxhYmVsLmFwcGVuZChgWyR7dGhpcy5uYW1lfV06IGApO1xyXG4gICAgICBsYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgIGlucHV0V3JhcC5hcHBlbmRDaGlsZChzZW5kKTtcclxuICAgICAgc2VuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLmZyYW1lLmNvbnRlbnRXaW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKGBbJHt0aGlzLm5hbWV9XSAtICR7aW5wdXQudmFsdWV9YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGlmICh0aGlzLnN5c3RlbSkge1xyXG4gICAgICB0aGlzLmxpc3Rlbk1lc3NhZ2VzKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5mcmFtZTtcclxuICB9XHJcbiAgXHJcbiAgY2xlYXJDaGF0KCkge1xyXG4gICAgd2hpbGUgKCt0aGlzLmNoYXQub2Zmc2V0SGVpZ2h0ID4gMTcwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hhdC5jaGlsZHJlbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsaXN0ZW5NZXNzYWdlcygpIHtcclxuICAgIHRoaXMuc3lzdGVtLnN1YnNjcmliZSgncmVjZWl2ZWRNZXNzYWdlJywgKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuY3JlYXRlVGFnKCdwJywgJ2lmcmFtZV9fdGV4dCcpO1xyXG4gICAgICBtZXNzYWdlLmFwcGVuZChkYXRhKTtcclxuICAgICAgdGhpcy5jaGF0LmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xyXG4gICAgICB0aGlzLmNsZWFyQ2hhdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnN5c3RlbS5zdWJzY3JpYmUoJ2FkZE5ld0lmcmFtZScsIChkYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmNyZWF0ZVRhZygncCcsICdpZnJhbWVfX3RleHQnLCAnaWZyYW1lX190ZXh0LS1zeXN0ZW0nKTtcclxuICAgICAgbWVzc2FnZS5hcHBlbmQoYFtzeXN0ZW1dOiAke2RhdGF9IGpvaW5lZCB0aGUgY29udmVyc2F0aW9uYCk7XHJcbiAgICAgIG1lc3NhZ2UuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgdGhpcy5jaGF0LmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xyXG4gICAgICB0aGlzLmNsZWFyQ2hhdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==

"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var IFrame=function(){function a(e,t){_classCallCheck(this,a),this.name=e,this.system=t,this.createTag=createTag,this.frame=this.createTag("iframe","iframe"),this.chat=null,this.isOwnMessage=!1}return _createClass(a,[{key:"renderIframe",value:function(){var h=this;this.frame.setAttribute("name","".concat(this.name)),this.frame.setAttribute("scrolling","no");var l=this.createTag("link");return l.setAttribute("href","./css/app.min.css"),l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),this.frame.onload=function(){var e=h.frame.contentWindow.document;e.head.appendChild(l);var t=h.createTag("div","iframe__chat"),a=h.createTag("h3","iframe__text","iframe__text--heading"),i=h.createTag("div","iframe__content");h.chat=i;var s=h.createTag("div","iframe__input-wrap"),n=h.createTag("label","iframe__label"),r=h.createTag("input","iframe__input");r.setAttribute("type","text");var c=h.createTag("button","iframe__send");c.setAttribute("type","button"),c.append("send"),a.append("Chat: "),e.body.appendChild(t).appendChild(a),t.appendChild(i),e.body.appendChild(s).appendChild(n),n.append("[".concat(h.name,"]: ")),n.appendChild(r),s.appendChild(c),c.addEventListener("click",function(){h.frame.contentWindow.parent.postMessage("[".concat(h.name,"] - ").concat(r.value)),h.isOwnMessage=!0})},this.system&&this.listenMessages(),this.frame}},{key:"clearChat",value:function(){for(;170<+this.chat.offsetHeight;)this.chat.removeChild(this.chat.children[0])}},{key:"listenMessages",value:function(){var a=this;this.system.subscribe("receivedMessage",function(e){var t=a.createTag("p","iframe__text");t.append(e.message),"system"===e.type?t.classList.add("iframe__text--system"):a.isOwnMessage&&(t.classList.add("iframe__text--own"),a.isOwnMessage=!1),a.chat.appendChild(t),a.clearChat()})}},{key:"activateDragable",value:function(){this.frame.addEventListener("mousedown",function(){})}}]),a}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2lmcmFtZS5qcyJdLCJuYW1lcyI6WyJJRnJhbWUiLCJuYW1lIiwic3lzdGVtIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNyZWF0ZVRhZyIsImZyYW1lIiwiY2hhdCIsImlzT3duTWVzc2FnZSIsIl90aGlzIiwic2V0QXR0cmlidXRlIiwiY29uY2F0IiwiY3NzTGluayIsIm9ubG9hZCIsImlmcmFtZURvYyIsImNvbnRlbnRXaW5kb3ciLCJkb2N1bWVudCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImhlYWRpbmciLCJtZXNzYWdlcyIsImlucHV0V3JhcCIsImxhYmVsIiwiaW5wdXQiLCJzZW5kIiwiYXBwZW5kIiwiYm9keSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsInZhbHVlIiwibGlzdGVuTWVzc2FnZXMiLCJvZmZzZXRIZWlnaHQiLCJyZW1vdmVDaGlsZCIsImNoaWxkcmVuIiwiX3RoaXMyIiwic3Vic2NyaWJlIiwiZGF0YSIsIm1lc3NhZ2UiLCJ0eXBlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xlYXJDaGF0Il0sIm1hcHBpbmdzIjoidVpBQU1BLGtCQUNKLFNBQUFBLEVBQVlDLEVBQU1DLEdBQVFDLGdCQUFBQyxLQUFBSixHQUN4QkksS0FBS0gsS0FBT0EsRUFDWkcsS0FBS0YsT0FBU0EsRUFDZEUsS0FBS0MsVUFBWUEsVUFDakJELEtBQUtFLE1BQVFGLEtBQUtDLFVBQVUsU0FBVSxVQUN0Q0QsS0FBS0csS0FBTyxLQUNaSCxLQUFLSSxjQUFlLDhEQUdQLElBQUFDLEVBQUFMLEtBQ2JBLEtBQUtFLE1BQU1JLGFBQWEsT0FBeEIsR0FBQUMsT0FBbUNQLEtBQUtILE9BQ3hDRyxLQUFLRSxNQUFNSSxhQUFhLFlBQWEsTUFDckMsSUFBTUUsRUFBVVIsS0FBS0MsVUFBVSxRQWlDL0IsT0FoQ0FPLEVBQVFGLGFBQWEsT0FBUSxxQkFDN0JFLEVBQVFGLGFBQWEsTUFBTyxjQUM1QkUsRUFBUUYsYUFBYSxPQUFRLFlBQzdCTixLQUFLRSxNQUFNTyxPQUFTLFdBQ2xCLElBQU1DLEVBQVlMLEVBQUtILE1BQU1TLGNBQWNDLFNBQzNDRixFQUFVRyxLQUFLQyxZQUFZTixHQUMzQixJQUFNTCxFQUFPRSxFQUFLSixVQUFVLE1BQU8sZ0JBQzdCYyxFQUFVVixFQUFLSixVQUFVLEtBQU0sZUFBZ0IseUJBQy9DZSxFQUFXWCxFQUFLSixVQUFVLE1BQU8sbUJBQ3ZDSSxFQUFLRixLQUFPYSxFQUNaLElBQU1DLEVBQVlaLEVBQUtKLFVBQVUsTUFBTyxzQkFDbENpQixFQUFRYixFQUFLSixVQUFVLFFBQVMsaUJBQ2hDa0IsRUFBUWQsRUFBS0osVUFBVSxRQUFTLGlCQUN0Q2tCLEVBQU1iLGFBQWEsT0FBUSxRQUMzQixJQUFNYyxFQUFPZixFQUFLSixVQUFVLFNBQVUsZ0JBQ3RDbUIsRUFBS2QsYUFBYSxPQUFRLFVBQzFCYyxFQUFLQyxPQUFPLFFBQ1pOLEVBQVFNLE9BQU8sVUFDZlgsRUFBVVksS0FBS1IsWUFBWVgsR0FBTVcsWUFBWUMsR0FDN0NaLEVBQUtXLFlBQVlFLEdBQ2pCTixFQUFVWSxLQUFLUixZQUFZRyxHQUFXSCxZQUFZSSxHQUNsREEsRUFBTUcsT0FBTixJQUFBZCxPQUFpQkYsRUFBS1IsS0FBdEIsUUFDQXFCLEVBQU1KLFlBQVlLLEdBQ2xCRixFQUFVSCxZQUFZTSxHQUN0QkEsRUFBS0csaUJBQWlCLFFBQVMsV0FDN0JsQixFQUFLSCxNQUFNUyxjQUFjYSxPQUFPQyxZQUFoQyxJQUFBbEIsT0FBZ0RGLEVBQUtSLEtBQXJELFFBQUFVLE9BQWdFWSxFQUFNTyxRQUN0RXJCLEVBQUtELGNBQWUsS0FHcEJKLEtBQUtGLFFBQ1BFLEtBQUsyQixpQkFFQTNCLEtBQUtFLDBDQUlaLEtBQWlDLEtBQXpCRixLQUFLRyxLQUFLeUIsY0FDaEI1QixLQUFLRyxLQUFLMEIsWUFBWTdCLEtBQUtHLEtBQUsyQixTQUFTLDZDQUk1QixJQUFBQyxFQUFBL0IsS0FDZkEsS0FBS0YsT0FBT2tDLFVBQVUsa0JBQW1CLFNBQUNDLEdBQ3hDLElBQU1DLEVBQVVILEVBQUs5QixVQUFVLElBQUssZ0JBQ3BDaUMsRUFBUWIsT0FBT1ksRUFBS0MsU0FDRixXQUFkRCxFQUFLRSxLQUNQRCxFQUFRRSxVQUFVQyxJQUFJLHdCQUNiTixFQUFLM0IsZUFDZDhCLEVBQVFFLFVBQVVDLElBQUkscUJBQ3RCTixFQUFLM0IsY0FBZSxHQUV0QjJCLEVBQUs1QixLQUFLVyxZQUFZb0IsR0FDdEJILEVBQUtPLHlEQUtQdEMsS0FBS0UsTUFBTXFCLGlCQUFpQixZQUFhIiwiZmlsZSI6ImpzL2lmcmFtZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBJRnJhbWUge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUsIHN5c3RlbSkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuc3lzdGVtID0gc3lzdGVtO1xyXG4gICAgdGhpcy5jcmVhdGVUYWcgPSBjcmVhdGVUYWc7XHJcbiAgICB0aGlzLmZyYW1lID0gdGhpcy5jcmVhdGVUYWcoJ2lmcmFtZScsICdpZnJhbWUnKTtcclxuICAgIHRoaXMuY2hhdCA9IG51bGw7XHJcbiAgICB0aGlzLmlzT3duTWVzc2FnZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySWZyYW1lKCkge1xyXG4gICAgdGhpcy5mcmFtZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBgJHt0aGlzLm5hbWV9YCk7XHJcbiAgICB0aGlzLmZyYW1lLnNldEF0dHJpYnV0ZSgnc2Nyb2xsaW5nJywgJ25vJyk7XHJcbiAgICBjb25zdCBjc3NMaW5rID0gdGhpcy5jcmVhdGVUYWcoJ2xpbmsnKTtcclxuICAgIGNzc0xpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgJy4vY3NzL2FwcC5taW4uY3NzJyk7XHJcbiAgICBjc3NMaW5rLnNldEF0dHJpYnV0ZSgncmVsJywgJ3N0eWxlc2hlZXQnKTtcclxuICAgIGNzc0xpbmsuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7XHJcbiAgICB0aGlzLmZyYW1lLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgY29uc3QgaWZyYW1lRG9jID0gdGhpcy5mcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O1xyXG4gICAgICBpZnJhbWVEb2MuaGVhZC5hcHBlbmRDaGlsZChjc3NMaW5rKTtcclxuICAgICAgY29uc3QgY2hhdCA9IHRoaXMuY3JlYXRlVGFnKCdkaXYnLCAnaWZyYW1lX19jaGF0Jyk7XHJcbiAgICAgIGNvbnN0IGhlYWRpbmcgPSB0aGlzLmNyZWF0ZVRhZygnaDMnLCAnaWZyYW1lX190ZXh0JywgJ2lmcmFtZV9fdGV4dC0taGVhZGluZycpO1xyXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHRoaXMuY3JlYXRlVGFnKCdkaXYnLCAnaWZyYW1lX19jb250ZW50Jyk7XHJcbiAgICAgIHRoaXMuY2hhdCA9IG1lc3NhZ2VzO1xyXG4gICAgICBjb25zdCBpbnB1dFdyYXAgPSB0aGlzLmNyZWF0ZVRhZygnZGl2JywgJ2lmcmFtZV9faW5wdXQtd3JhcCcpO1xyXG4gICAgICBjb25zdCBsYWJlbCA9IHRoaXMuY3JlYXRlVGFnKCdsYWJlbCcsICdpZnJhbWVfX2xhYmVsJyk7XHJcbiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5jcmVhdGVUYWcoJ2lucHV0JywgJ2lmcmFtZV9faW5wdXQnKTtcclxuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcclxuICAgICAgY29uc3Qgc2VuZCA9IHRoaXMuY3JlYXRlVGFnKCdidXR0b24nLCAnaWZyYW1lX19zZW5kJyk7XHJcbiAgICAgIHNlbmQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xyXG4gICAgICBzZW5kLmFwcGVuZCgnc2VuZCcpO1xyXG4gICAgICBoZWFkaW5nLmFwcGVuZCgnQ2hhdDogJyk7XHJcbiAgICAgIGlmcmFtZURvYy5ib2R5LmFwcGVuZENoaWxkKGNoYXQpLmFwcGVuZENoaWxkKGhlYWRpbmcpO1xyXG4gICAgICBjaGF0LmFwcGVuZENoaWxkKG1lc3NhZ2VzKTtcclxuICAgICAgaWZyYW1lRG9jLmJvZHkuYXBwZW5kQ2hpbGQoaW5wdXRXcmFwKS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICAgIGxhYmVsLmFwcGVuZChgWyR7dGhpcy5uYW1lfV06IGApO1xyXG4gICAgICBsYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgIGlucHV0V3JhcC5hcHBlbmRDaGlsZChzZW5kKTtcclxuICAgICAgc2VuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLmZyYW1lLmNvbnRlbnRXaW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKGBbJHt0aGlzLm5hbWV9XSAtICR7aW5wdXQudmFsdWV9YCk7XHJcbiAgICAgICAgdGhpcy5pc093bk1lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgICBpZiAodGhpcy5zeXN0ZW0pIHtcclxuICAgICAgdGhpcy5saXN0ZW5NZXNzYWdlcygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZnJhbWU7XHJcbiAgfVxyXG5cclxuICBjbGVhckNoYXQoKSB7XHJcbiAgICB3aGlsZSAoK3RoaXMuY2hhdC5vZmZzZXRIZWlnaHQgPiAxNzApIHtcclxuICAgICAgdGhpcy5jaGF0LnJlbW92ZUNoaWxkKHRoaXMuY2hhdC5jaGlsZHJlblswXSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsaXN0ZW5NZXNzYWdlcygpIHtcclxuICAgIHRoaXMuc3lzdGVtLnN1YnNjcmliZSgncmVjZWl2ZWRNZXNzYWdlJywgKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuY3JlYXRlVGFnKCdwJywgJ2lmcmFtZV9fdGV4dCcpO1xyXG4gICAgICBtZXNzYWdlLmFwcGVuZChkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnc3lzdGVtJykge1xyXG4gICAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnaWZyYW1lX190ZXh0LS1zeXN0ZW0nKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzT3duTWVzc2FnZSkge1xyXG4gICAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnaWZyYW1lX190ZXh0LS1vd24nKTtcclxuICAgICAgICB0aGlzLmlzT3duTWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY2hhdC5hcHBlbmRDaGlsZChtZXNzYWdlKTtcclxuICAgICAgdGhpcy5jbGVhckNoYXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVEcmFnYWJsZSgpIHtcclxuICAgIHRoaXMuZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl19
